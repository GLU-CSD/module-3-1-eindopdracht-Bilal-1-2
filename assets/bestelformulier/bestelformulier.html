<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bestelformulier</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="formulier">
        <form method="post" action="/submit">
            <fieldset>
                <legend>Bestelformulier</legend>

                <label for="aanhef">Aanhef:</label>
                <select name="aanhef" id="aanhef" required>
                    <option value="Dhr">Dhr.</option>
                    <option value="Mevr">Mevr.</option>
                </select>
                 
                <label for="voornaam">Voornaam:</label>
                <input type="text" name="voornaam" id="voornaam" required>
                
                <label for="tussenvoegsel">Tussenvoegsel:</label>
                <input type="text" name="tussenvoegsel" id="tussenvoegsel">
                
                <label for="achternaam">Achternaam:</label>
                <input type="text" name="achternaam" id="achternaam" required>
                
                <div style="display: flex; justify-content: space-between;">
                    <div>
                        <label for="adres">Straatnaam:</label>
                        <input type="text" name="adres" id="adres" required>
                    </div>
                    <div>
                        <label for="huisnummer">Huisnummer:</label>
                        <input type="text" name="huisnummer" id="huisnummer" required>
                    </div>
                    <div>
                        <label for="postcode">Postcode:</label>
                        <input type="text" name="postcode" id="postcode" required pattern="[0-9]{4}[A-Za-z]{2}" title="Vul een geldige postcode in (bijv. 1234AB)">
                    </div>
                </div>

                <label for="email">E-mail:</label>
                <input type="email" name="email" id="email" required>

                <label for="land">Land:</label>
                <select name="land" id="land" required>
                    <option value="Nederland">Nederland</option>
                    <option value="Belgie">Belgie</option>
                </select>

                <label for="telefoonnummer">Telefoonnummer:</label>
                <input type="tel" name="telefoonnummer" id="telefoonnummer" required pattern="\d{10}" title="Vul een geldig telefoonnummer in (minimaal 10 cijfers)">

                <label for="gebortedatum">Geboortedatum:</label>
                <input type="date" name="gebortedatum" id="gebortedatum" required>
            </fieldset>

            <fieldset>
                <legend>Jouw bestelling</legend>
                <ul id="order-list"></ul>
            </fieldset>
            
            <fieldset>
                <legend>Opmerkingen</legend>
                <textarea name="opmerking" rows="5" cols="40" placeholder="Uw bericht..."></textarea>
            </fieldset>
            
            <fieldset>
                <input type="submit" value="Bestelling plaatsen">
                <input type="reset" value="Herstellen">
            </fieldset>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            let orderList = document.getElementById("order-list");
      
            if (cart.length === 0) {
                orderList.innerHTML = "<p>Je winkelwagen is leeg.</p>";
            } else {
                cart.forEach(item => {
                    let listItem = document.createElement("li");
                    listItem.textContent = `${item.product} - â‚¬${item.price}`;
                    orderList.appendChild(listItem);
                });
            }
        });

        // Store form data in local storage
        document.querySelector("form").addEventListener("input", function() {
            const formData = {
                voornaam: document.getElementById("voornaam").value,
                tussenvoegsel: document.getElementById("tussenvoegsel").value,
                achternaam: document.getElementById("achternaam").value,
                adres: document.getElementById("adres").value,
                huisnummer: document.getElementById("huisnummer").value,
                postcode: document.getElementById("postcode").value,
                email: document.getElementById("email").value,
                land: document.getElementById("land").value,
                telefoonnummer: document.getElementById("telefoonnummer").value,
                gebortedatum: document.getElementById("gebortedatum").value,
            };
            localStorage.setItem("formData", JSON.stringify(formData));
        });

        // Restore data when the form is loaded
        document.addEventListener("DOMContentLoaded", function() {
            const storedData = JSON.parse(localStorage.getItem("formData"));
            if (storedData) {
                document.getElementById("voornaam").value = storedData.voornaam || '';
                document.getElementById("tussenvoegsel").value = storedData.tussenvoegsel || '';
                document.getElementById("achternaam").value = storedData.achternaam || '';
                document.getElementById("adres").value = storedData.adres || '';
                document.getElementById("huisnummer").value = storedData.huisnummer || '';
                document.getElementById("postcode").value = storedData.postcode || '';
                document.getElementById("email").value = storedData.email || '';
                document.getElementById("land").value = storedData.land || '';
                document.getElementById("telefoonnummer").value = storedData.telefoonnummer || '';
                document.getElementById("gebortedatum").value = storedData.gebortedatum || '';
            }
        });

        // Clear the form and local storage on reset
        document.querySelector("form").addEventListener("reset", function() {
            localStorage.removeItem("formData");
        });
    </script>
</body>
</html>
